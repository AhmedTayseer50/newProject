<div class="container py-4" dir="rtl">
  <div class="head">
    <div>
      <h3 class="title">๐๏ธ ุทูุจุงุช ุญุฌุฒ ุงูุฌูุณุงุช</h3>
      <div class="sub">ุงูุทูุจุงุช ุจุชุธูุฑ ููุง ููุฑูุง ุจูุฌุฑุฏ ุฅุฑุณุงููุง.</div>
    </div>

    <div class="tabs">
      <button class="tab" [class.active]="filter==='new'" (click)="filter='new'">
        ุฌุฏูุฏ <span class="badge">{{ count('new') }}</span>
      </button>

      <button class="tab" [class.active]="filter==='in_review'" (click)="filter='in_review'">
        ููุฏ ุงููุฑุงุฌุนุฉ <span class="badge">{{ count('in_review') }}</span>
      </button>

      <button class="tab" [class.active]="filter==='contacted'" (click)="filter='contacted'">
        ุชู ุงูุชูุงุตู <span class="badge">{{ count('contacted') }}</span>
      </button>

      <button class="tab" [class.active]="filter==='closed'" (click)="filter='closed'">
        ููุบูู <span class="badge">{{ count('closed') }}</span>
      </button>

      <button class="tab" [class.active]="filter==='all'" (click)="filter='all'">
        ุงููู <span class="badge">{{ all.length }}</span>
      </button>
    </div>
  </div>

  <div *ngIf="error" class="alert alert-danger">{{ error }}</div>
  <div *ngIf="loading" class="alert alert-info">ุฌุงุฑู ุงูุชุญูููโฆ</div>

  <div class="grid" *ngIf="!loading">
    <div class="req-card" *ngFor="let r of filtered">
      <div class="req-top">
        <div class="who">
          <div class="name">{{ r.name }}</div>
          <div class="meta">
            <span>{{ r.age }} ุณูุฉ</span>
            <span>โข</span>
            <span>{{ r.maritalStatus }}</span>
            <span>โข</span>
            <span>{{ r.nationality }}</span>
          </div>
        </div>

        <div class="price">
          <div class="p">{{ r.price }} {{ r.currency }}</div>
          <div class="s">ุงูุญุงูุฉ: {{ r.status }}</div>
        </div>
      </div>

      <div class="line">
        <div class="k">ุงููุธููุฉ</div>
        <div class="v">{{ r.job }}</div>
      </div>

      <div class="line">
        <div class="k">ูุงุชุณุงุจ</div>
        <div class="v ltr">
          {{ r.whatsapp }}
          <a class="wa" [href]="waLink(r.whatsapp)" target="_blank" rel="noopener">ูุชุญ ูุงุชุณุงุจ</a>
        </div>
      </div>

      <div class="problem">
        <div class="k">ุงููุดููุฉ ุงูุฃุณุงุณูุฉ</div>
        <div class="v">{{ r.problem }}</div>
      </div>

      <div class="actions">
        <button class="btn btn-ghost" type="button" (click)="setStatus(r.id!, 'in_review')">ููุฏ ุงููุฑุงุฌุนุฉ</button>
        <button class="btn btn-ghost" type="button" (click)="setStatus(r.id!, 'contacted')">ุชู ุงูุชูุงุตู</button>
        <button class="btn btn-primary" type="button" (click)="setStatus(r.id!, 'closed')">ุฅุบูุงู</button>
      </div>

      <div class="date">
        {{ r.createdAt | date:'medium' }}
      </div>
    </div>

    <div class="empty" *ngIf="!filtered.length">
      ูุง ุชูุฌุฏ ุทูุจุงุช ูู ูุฐุง ุงููุณู.
    </div>
  </div>
</div>
